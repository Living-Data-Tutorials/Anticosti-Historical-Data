knitr::opts_chunk$set(echo = TRUE)
# Tree condition data url paths
url_tree <- "https://open.canada.ca/data/en/dataset/9dda09b0-649f-4002-b207-7b204eb81cbb/resource/a1606235-95aa-4c81-a8db-19b852be288c"
csv_tree <- "download/anticosti_1973_trees.csv"
# Import the data
tree <- read.csv(file.path(url_tree, csv_tree), header = TRUE)
# Keep only the columns we need
tree <- tree[, c("Block", "Compartment", "Plot",
"Cell", "Species", "Species_abbrev",
"Condition", "Number")]
# Separate row number in instances to have all individual counts
test[rep(seq(.N), Number)]
knitr::opts_chunk$set(echo = TRUE)
# Tree condition data url paths
url_tree <- "https://open.canada.ca/data/en/dataset/9dda09b0-649f-4002-b207-7b204eb81cbb/resource/a1606235-95aa-4c81-a8db-19b852be288c"
csv_tree <- "download/anticosti_1973_trees.csv"
# Import the data
tree <- read.csv(file.path(url_tree, csv_tree), header = TRUE)
# Keep only the columns we need
tree <- tree[, c("Block", "Compartment", "Plot",
"Cell", "Species", "Species_abbrev",
"Condition", "Number")]
# Separate row number in instances to have all individual counts
## test[rep(seq(.N), Number)]
##Further customize tree plot
library(ggplot2)
library(viridis)
library(hrbrthemes)
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
##diversity of trees per block
tree_bloc <- ggplot(tree, aes (y=Number, x=Block, fill = Species_abbrev)) +
geom_bar(position="stack", stat="identity")
tree_bloc
tree_bloc2 <- tree_bloc + scale_fill_manual(values=cbPalette) +
ggtitle("Tree species across blocks, during hemlock looper outbreak in 1973") +
xlab("Block") + ylab ("Count of species") + scale_fill_discrete(name = "Tree species")
tree_bloc2
## Differences in tree condition per plot
##diversity of trees per compartment
treecon <- ggplot(tree, aes (y=Number, x=Species_abbrev, fill = Condition)) +
geom_bar(position="stack", stat="identity")
treecon
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
treecon_2 <- treecon + scale_fill_manual(values=cbPalette) +
ggtitle("Tree condition across species, during hemlock looper outbreak in 1973") +
xlab("Species") + ylab ("Count of species") + scale_fill_discrete(name = "Tree condition")
knitr::opts_chunk$set(echo = TRUE)
tree <- read.csv("anticosti_1973_trees.csv", header = TRUE)
##Further customize tree plot
library(ggplot2)
library(viridis)
library(hrbrthemes)
library("learnr")
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
##diversity of trees per block
tree_bloc <- ggplot(tree, aes (y=Number, x=Block, fill = Species_abbrev)) +
geom_bar(position="stack", stat="identity")
tree_bloc
tree_bloc2 <- tree_bloc + scale_fill_manual(values=cbPalette) +
ggtitle("Tree species across blocks, during hemlock looper outbreak in 1973") +
xlab("Block") + ylab ("Count of species") + scale_fill_discrete(name = "Tree species")
tree_bloc2
question("What tree species is the most abundant across the blocks?",
answer("BOP"),
answer("EPB"),
answer("EPN"),
answer("Meleze"),
answer("Peuplier"),
answer("Pin"),
answer("SAB", correct = TRUE)
)
question("What tree species is the most abundant across the blocks?",
answer("BOP"),
answer("EPB"),
answer("EPN"),
answer("Meleze"),
answer("Peuplier"),
answer("Pin"),
answer("SAB", correct = TRUE)
)
library(data.table)
library(ggplot2)
library(viridis)
library("learnr")
# Tree condition data url paths
url_tree <- "https://open.canada.ca/data/en/dataset/9dda09b0-649f-4002-b207-7b204eb81cbb/resource/a1606235-95aa-4c81-a8db-19b852be288c"
csv_tree <- "download/anticosti_1973_trees.csv"
# Import the data and keep the data we need
tree <- fread(file.path(url_tree, csv_tree),
select = c("Block", "Compartment", "Plot",
"Cell", "Species", "Species_abbrev",
"Condition", "Number"))
# Separate row number in instances to have all individual counts
tree <- tree[rep(seq(.N), Number)]
tree[, Number := 1]
remotes::install_github("r-lib/ymlthis")
install.packages("tidyverse")
# Tree condition data url paths
url_tree <- "https://open.canada.ca/data/en/dataset/9dda09b0-649f-4002-b207-7b204eb81cbb/resource/a1606235-95aa-4c81-a8db-19b852be288c"
csv_tree <- "download/anticosti_1973_trees.csv"
# Import the data and keep the data we need
tree <- fread(file.path(url_tree, csv_tree),
select = c("Block", "Compartment", "Plot",
"Cell", "Species", "Species_abbrev",
"Condition", "Number"))
# Separate row number in instances to have all individual counts
tree <- tree[rep(seq(.N), Number)]
tree[, Number := 1]
question("What tree species is the most abundant across the blocks? Select all that apply",
answer("White birch (BOP) - *Betula papyrifera*"),
answer("White spruce (EPB) - *Picea glauca*"),
answer("Black spruce (EPN) - *Picea mariana*"),
answer("Larch (Meleze) - *Larix* spp."),
answer("Aspen (Peuplier) - *Populus* spp."),
answer("Pine (Pin) - *Pinus* spp."),
answer("Balsam fir (SAB) - *Abies balsamea*", correct = TRUE)
)
question("What tree species is the least abundant across the blocks? Select all that apply.",
answer("White birch (BOP) - *Betula papyrifera*"),
answer("White spruce (EPB) - *Picea glauca*"),
answer("Black spruce (EPN) - *Picea mariana*"),
answer("Larch (Meleze) - *Larix* spp.", correct = TRUE),
answer("Aspen (Peuplier) - *Populus* spp.", correct = TRUE),
answer("Pine (Pin) - *Pinus* spp.", correct = TRUE),
answer("Balsam fir (SAB) - *Abies balsamea*")
)
question("What would you expect to see if a tree was most damaged by hemlock looper because it was more abundant?",
answer("An increasing, straight line - one-to-one relationship, where having more trees means more damage will be detected*", correct = TRUE),
answer("A decreasing, straight line - one-to-one relationship, where having less trees means more damage will be detected*", correct = TRUE),
answer("A ... - what drives dynamics is tree species identity, and not that species' abundance - ),
answer("Black spruce (EPN) - *Picea mariana*", correct = TRUE),
)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(data.table)
library(ggplot2)
library(tidyverse)
library(viridis)
library(learnr)
# Chunk 3
# Tree condition data url paths
url_tree <- "https://open.canada.ca/data/en/dataset/9dda09b0-649f-4002-b207-7b204eb81cbb/resource/a1606235-95aa-4c81-a8db-19b852be288c"
csv_tree <- "download/anticosti_1973_trees.csv"
# Import the data and keep the data we need
tree <- fread(file.path(url_tree, csv_tree),
select = c("Block", "Compartment", "Plot",
"Cell", "Species", "Species_abbrev",
"Condition", "Number"))
# Separate row number in instances to have all individual counts
tree <- tree[rep(seq(.N), Number)]
tree[, Number := 1]
# Chunk 4
# Prepare some plot customizations
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73",
"#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# Diversity of trees
tree_bloc <- ggplot(tree, aes (y = Number, x = "", fill = Species_abbrev)) +
geom_bar(position = "stack", stat = "identity")
tree_bloc
tree_bloc2 <- tree_bloc + scale_fill_manual(values=cbPalette) +
ggtitle("Tree species identified during hemlock looper outbreak in 1973") +
xlab("") +
ylab ("Relative proportion\n") +
scale_fill_discrete(name = "Tree species")
# Chunk 5
tree_bloc2
# Chunk 6: checkbox-a
question("What tree species is the most abundant in the data? Select all that apply",
answer("White birch (BOP) - *Betula papyrifera*"),
answer("White spruce (EPB) - *Picea glauca*"),
answer("Black spruce (EPN) - *Picea mariana*"),
answer("Larch (Meleze) - *Larix* spp."),
answer("Aspen (Peuplier) - *Populus* spp."),
answer("Pine (Pin) - *Pinus* spp."),
answer("Balsam fir (SAB) - *Abies balsamea*", correct = TRUE)
)
# Chunk 7: checkbox-b
question("What tree species is the least abundant in the data? Select all that apply.",
answer("White birch (BOP) - *Betula papyrifera*"),
answer("White spruce (EPB) - *Picea glauca*"),
answer("Black spruce (EPN) - *Picea mariana*"),
answer("Larch (Meleze) - *Larix* spp.", correct = TRUE),
answer("Aspen (Peuplier) - *Populus* spp.", correct = TRUE),
answer("Pine (Pin) - *Pinus* spp.", correct = TRUE),
answer("Balsam fir (SAB) - *Abies balsamea*")
)
# Chunk 8
# Differences in tree condition per plot
# Diversity of trees per compartment
treecon <- ggplot(tree, aes (y = Number, x = Species_abbrev, fill = Condition)) +
geom_bar(position = "stack", stat = "identity")
treecon
treecon_2 <- treecon + scale_fill_manual(values=cbPalette) +
ggtitle("Tree condition across species, during hemlock looper outbreak in 1973") +
xlab("\nSpecies") +
ylab ("Relative proportion\n") +
scale_fill_discrete(name = "Tree condition")
tree
# Prepare some plot customizations
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73",
"#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# Diversity of trees
## Relative frequency of tree species
tree_rel <- tree %>%
group_by(Species_abbrev) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n))
tree_rel
tree_bloc <- ggplot(tree_rel, aes (y = Number, x = "", fill = Species_abbrev)) +
geom_bar(position = "stack", stat = "identity")
tree_bloc
tree_bloc2 <- tree_bloc + scale_fill_manual(values=cbPalette) +
ggtitle("Tree species identified during hemlock looper outbreak in 1973") +
xlab("") +
ylab ("Relative proportion\n") +
scale_fill_discrete(name = "Tree species")
tree_bloc2
# Prepare some plot customizations
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73",
"#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# Diversity of trees
## Relative frequency of tree species
tree_rel <- tree %>%
group_by(Species_abbrev) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n))
tree_rel
# Prepare some plot customizations
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73",
"#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# Diversity of trees
## Relative frequency of tree species
tree_rel <- tree %>%
group_by(Species_abbrev) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n))
tree_rel
tree_bloc <- ggplot(tree_rel, aes (y = freq, x = "", fill = Species_abbrev)) +
geom_bar(position = "stack", stat = "identity")
tree_bloc
tree_bloc2 <- tree_bloc + scale_fill_manual(values=cbPalette) +
ggtitle("Tree species identified during hemlock looper outbreak in 1973") +
xlab("") +
ylab ("Relative proportion\n") +
scale_fill_discrete(name = "Tree species")
tree_bloc2
# Differences in tree condition per plot
# Diversity of trees per compartment
tree_damage <- tree %>%
group_by(Condition) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n))
tree_damage
treecon <- ggplot(tree_damage, aes (y = freq, x = Species_abbrev, fill = Condition)) +
geom_bar(position = "stack", stat = "identity")
treecon
treecon_2 <- treecon + scale_fill_manual(values=cbPalette) +
ggtitle("Tree condition across species, during hemlock looper outbreak in 1973") +
xlab("\nSpecies") +
ylab ("Relative proportion\n") +
scale_fill_discrete(name = "Tree condition")
# Differences in tree condition per plot
# Diversity of trees per compartment
tree_damage <- tree %>%
group_by(Species_abbrev, Condition) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n))
tree_damage
treecon <- ggplot(tree_damage, aes (y = freq, x = Species_abbrev, fill = Condition)) +
geom_bar(position = "stack", stat = "identity")
treecon
treecon_2 <- treecon + scale_fill_manual(values=cbPalette) +
ggtitle("Tree condition across species, during hemlock looper outbreak in 1973") +
xlab("\nSpecies") +
ylab ("Relative proportion\n") +
scale_fill_discrete(name = "Tree condition")
